<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="RB_Y1_V1.0.1">

  <!-- Define Properties -->
  <xacro:property name="wheel_radius" value="0.09"/>
  <xacro:property name="wheel_width" value="0.04"/>
  <xacro:property name="wheel_separation" value="0.32"/>
  <xacro:property name="robot_mass" value="60.08"/>
  <xacro:property name="robot_height" value="0.5"/>

  <!-- Base Link -->
  <link name="base_link">
    <inertial>
      <mass value="60.0"/>
      <origin xyz="0 0 0.5" rpy="0 0 0"/>
      <inertia ixx="1.3774" ixy="0.0252" ixz="0.1856"
               iyy="2.9938" iyz="-0.0064" izz="3.7608"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://warehouse_simulation/meshes/base.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <origin xyz="0 0 0.085" rpy="0 0 0"/>
        <geometry>
          <box size="0.5 0.5 0.18"/>
        </geometry>
      </geometry>
    </collision>
  </link>
  <gazebo reference="base_link">
  <material value="Gazebo/Red"/>
  </gazebo>

  <!-- Wheel Macro -->
  <xacro:macro name="wheel" params="wheel_name wheel_x wheel_y">
    <link name="${wheel_name}">
      <inertial>
        <mass value="1.377"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.0042" ixy="0.0" ixz="0.0"
                 iyy="0.0081" iyz="0.0" izz="0.0042"/>
      </inertial>
      <visual>
        <geometry>
          <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
        </geometry>
      </visual>
      <collision>
        <geometry>
          <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
        </geometry>
      </collision>
    </link>
    
    <joint name="base_to_${wheel_name}" type="continuous">
      <parent link="base_link"/>
      <child link="${wheel_name}"/>
      <origin xyz="${wheel_x} ${wheel_y} 0.1" rpy="0 0 0"/>
      <axis xyz="0 -1 0"/>
    </joint>
  </xacro:macro>

  <!-- Wheels -->
  <xacro:wheel wheel_name="wheel_r" wheel_x="0.228" wheel_y="-0.265"/>
  <xacro:wheel wheel_name="wheel_l" wheel_x="0.228" wheel_y="0.265"/>

  <!-- Additional links and joints will be modularized similarly -->
  
</robot>
